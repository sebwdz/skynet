{
	"request" : {
		"needs" : ["movies.id"],
		"from" : ["preferences"],
		"select" : [
			"preferences.views \"preferences.views\"",
			"users.age / 20.0 \"users.age\"",
			"users.gender \"users.gender\"",
			"opinions.rate \"opinions.rate\""],
		"joins" : [{
			"database" : "opinions as opinions",
			"on" : {
				"type" : "equal",
				"right" : ":movies.id",
				"left" : "opinions.fk_movie_id"
			}
		}, {
			"database" : "users",
			"on" : {
				"type" : "equal",
				"right" : "users.id",
				"left" : "opinions.fk_user_id"
			}
		}],
		"where" : {
			"type" : "equal",
			"left" : "preferences.fk_user_id",
			"right" : "users.id"
		}
	},
	"network" : {
		"settings" : {
			"type" : "SelfOrganizingMap",
			"inputs" : 21, 
			"outputs" : [4, 4],
			"outputs_type" : "average"
		},
		"session" : {
			"iterations" : 2000
		}
	},
	"settings" : {
		"inputs" : [{
			"type" : "json",
			"from" : [{
				"column" : "preferences.views",
				"fields" : [
					"Mystery", "Drama", "Sci-Fi", "Fantasy", "Unknown", 
        			"Horror", "Film-Noir", "Crime", "Romance", "Childrens", 
        			"Musical", "Animation", "Western", "Action", "Comedy", 
        			"Documentary", "War", "Thriller", "Adventure"
				]
			}]
		}, {
			"type" : "bool",
			"from" : [{"column" : "users.gender"}]
		}, {
			"type" : "double",
			"from" : [{"column" : "users.age"}]
		}],
		"outputs" : [{
			"type_use" : "average",
			"type" : "double",
			"from" : [{"column" : "opinions.rate"}]
		}]
	},
	"export" : [{
		"database" : "networks",
		"fields" : {
			"fk_id" : ":fk_id",
			"map" : {
					"outputs" : ":outputs",
					"network" : ":network"
			},
			"settings" : { 
				"request_id" : ":req.id"
			},
			"type" : "movies2"
		}
	}]
}